<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Park City 5-Day Forecast</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --navy:  #1a2740;
    --blue:  #2b4a6a;
    --sky:   #5bbfda;
    --red:   #cc2222;
    --white: #ffffff;
    --border: rgba(91,191,218,0.22);
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'Nunito', sans-serif;
    background: linear-gradient(140deg, #0d1a2b 0%, #1a2f4a 60%, #0f2035 100%);
    min-height: 100vh;
    color: var(--white);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px 16px;
  }
  .snow-deco { position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:0; }
  .snow-deco span { position:absolute; color:rgba(255,255,255,0.04); animation:drift linear infinite; }
  @keyframes drift {
    from { transform: translateY(-40px) rotate(0deg); }
    to   { transform: translateY(110vh) rotate(360deg); }
  }
  .container { position:relative; z-index:1; width:100%; max-width:700px; }
  .weather-card {
    background: linear-gradient(150deg, #0d1f35 0%, #172840 100%);
    border: 2px solid var(--border);
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.04);
    animation: fadeUp 0.6s ease both;
  }
  @keyframes fadeUp {
    from { opacity:0; transform:translateY(18px); }
    to   { opacity:1; transform:translateY(0); }
  }
  .card-header {
    background: linear-gradient(135deg, #1a2740, #2b4a6a);
    padding: 14px 22px 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--border);
    position: relative;
    overflow: hidden;
  }
  .card-header::before {
    content:''; position:absolute; top:-50px; right:-50px;
    width:160px; height:160px;
    background: radial-gradient(circle, rgba(91,191,218,0.1), transparent 65%);
    pointer-events:none;
  }
  .card-header::after {
    content:''; position:absolute; bottom:0; left:0; right:0; height:3px;
    background: linear-gradient(90deg, var(--red), var(--sky), var(--red));
  }
  .header-left { display:flex; flex-direction:column; gap:5px; }
  .header-location {
    font-family: 'Bebas Neue', cursive;
    font-size: 22px; color: var(--sky); letter-spacing: 2px; line-height:1;
  }
  .live-pill {
    display:inline-flex; align-items:center; gap:5px;
    background:rgba(204,34,34,0.18); border:1px solid rgba(204,34,34,0.4);
    color:#ff7777; font-size:8px; font-weight:800; letter-spacing:2px;
    padding:2px 8px; border-radius:20px; width:fit-content;
  }
  .live-dot {
    width:5px; height:5px; background:#ff4444; border-radius:50%;
    animation:blink 1.4s ease-in-out infinite;
  }
  @keyframes blink {
    0%,100% { opacity:1; transform:scale(1); }
    50%      { opacity:0.4; transform:scale(1.5); }
  }
  


    display:inline-flex; align-items:center; gap:6px;
    background:rgba(91,191,218,0.08); border:1px solid rgba(91,191,218,0.3);
    border-radius:6px; padding:4px 10px;
  }


  .forecast-grid {
    display:grid; grid-template-columns:repeat(5,1fr);
    gap:1px; background:var(--border); border-bottom:1px solid var(--border);
  }
  .fc-cell {
    background:#0f1f33; padding:16px 8px 14px; text-align:center;
    transition:background 0.2s; animation:fadeUp 0.4s ease both;
  }
  .fc-cell:nth-child(1){animation-delay:.05s}
  .fc-cell:nth-child(2){animation-delay:.10s}
  .fc-cell:nth-child(3){animation-delay:.15s}
  .fc-cell:nth-child(4){animation-delay:.20s}
  .fc-cell:nth-child(5){animation-delay:.25s}
  .fc-cell:hover { background:rgba(91,191,218,0.08); }
  .fc-cell.today-cell { background:rgba(91,191,218,0.1); border-top:3px solid var(--sky); }
  .fc-cell.trip-cell  { background:rgba(204,34,34,0.08); border-top:3px solid var(--red); }
  .fc-day  { font-size:9px; font-weight:800; letter-spacing:2px; text-transform:uppercase; color:rgba(255,255,255,0.4); margin-bottom:3px; }
  .fc-date { font-size:9px; color:rgba(255,255,255,0.22); margin-bottom:8px; }
  .fc-icon { font-size:28px; margin-bottom:6px; display:block; }
  .fc-high { font-family:'Bebas Neue',cursive; font-size:28px; line-height:1; color:var(--white); }
  .fc-low  { font-size:10px; color:rgba(255,255,255,0.3); font-weight:700; margin-top:1px; }
  .fc-prec { margin-top:6px; font-size:10px; color:var(--sky); font-weight:700; }
  .fc-bar-bg { height:3px; background:rgba(255,255,255,0.07); border-radius:2px; margin:4px 6px 0; overflow:hidden; }
  .fc-bar-fill {
    height:100%; background:linear-gradient(90deg,var(--sky),#88ddff);
    border-radius:2px; width:0%; transition:width 1.2s ease;
  }
  .fc-ski {
    font-size:7px; font-weight:800; letter-spacing:0.3px;
    margin-top:5px; padding:2px 4px; border-radius:4px;
    display:inline-block; line-height:1.4;
  }
  .card-footer {
    padding:10px 20px; display:flex; align-items:center;
    justify-content:space-between; background:rgba(0,0,0,0.2); gap:10px;
  }
  .footer-status { font-size:9px; color:rgba(255,255,255,0.25); letter-spacing:0.5px; }
  .footer-status.ok  { color:rgba(100,220,120,0.65); }
  .footer-status.err { color:rgba(255,120,120,0.65); }
  .refresh-btn {
    flex-shrink:0; background:var(--red); color:white; border:none;
    font-family:'Nunito',sans-serif; font-size:9px; font-weight:800;
    letter-spacing:2px; text-transform:uppercase; padding:6px 14px;
    border-radius:20px; cursor:pointer; transition:background 0.2s, transform 0.1s;
  }
  .refresh-btn:hover  { background:#e02525; transform:scale(1.05); }
  .refresh-btn:active { transform:scale(0.97); }
</style>
</head>
<body>

<div class="snow-deco" id="snowDeco"></div>

<div class="container">
  <div class="weather-card">

    <div class="card-header">
      <div class="header-left">
        <div class="header-location">üìç Park City, Utah ¬∑ ~7,000 ft</div>
        <div class="live-pill"><div class="live-dot"></div> LIVE ¬∑ DAILY UPDATES</div>
      </div>
      </div>
    </div>

    <div class="forecast-grid" id="forecastGrid">
      <div style="grid-column:1/-1;padding:28px;text-align:center;color:rgba(255,255,255,0.3);font-size:13px;">‚è≥ Loading forecast...</div>
    </div>

    <div class="card-footer">
      <div class="footer-status" id="footerStatus">Fetching data...</div>
      <button class="refresh-btn" onclick="loadWeather()">‚Üª Refresh</button>
    </div>

  </div>
</div>

<script>
// Snowflakes
const deco = document.getElementById('snowDeco');
for (let i = 0; i < 20; i++) {
  const s = document.createElement('span');
  s.textContent = '‚ùÑ';
  s.style.cssText = `left:${Math.random()*100}vw;font-size:${10+Math.random()*20}px;animation-duration:${14+Math.random()*20}s;animation-delay:${-Math.random()*30}s`;
  deco.appendChild(s);
}

if (host && host !== '' && host !== 'localhost') {

}

function wmoIcon(c) {
  if (c===0) return '‚òÄÔ∏è';
  if (c<=2)  return '‚õÖ';
  if (c===3) return '‚òÅÔ∏è';
  if (c<=49) return 'üå´';
  if (c<=57) return 'üå¶';
  if (c<=67) return 'üåß';
  if (c<=77) return 'üå®';
  if (c<=82) return 'üåß';
  if (c<=86) return '‚ùÑÔ∏è';
  return '‚õà';
}
function wmoText(c) {
  if (c===0) return 'Clear';      if (c<=2) return 'Partly Cloudy';
  if (c===3) return 'Overcast';   if (c<=49) return 'Foggy';
  if (c<=57) return 'Drizzle';    if (c<=67) return 'Rainy';
  if (c<=77) return 'Snow';       if (c<=82) return 'Showers';
  if (c<=86) return 'Heavy Snow'; return 'Storms';
}
function skiTag(prec, code) {
  if (code>=70&&code<=86) return { label:'‚≠ê FRESH POWDER',    color:'#5bbfda', bg:'rgba(91,191,218,0.15)' };
  if (prec>=60)           return { label:'üå® GREAT CONDITIONS', color:'#7dd4ee', bg:'rgba(91,191,218,0.12)' };
  if (prec>=30)           return { label:'‚õÖ GOOD CONDITIONS',  color:'#aaddee', bg:'rgba(150,210,230,0.1)' };
  if (code===0)           return { label:'‚òÄÔ∏è BLUEBIRD DAY',    color:'#ffdd88', bg:'rgba(255,221,136,0.1)' };
  return                         { label:'üéø SKIABLE',          color:'#cccccc', bg:'rgba(200,200,200,0.07)' };
}
function shortDate(ds) {
  return new Date(ds+'T12:00:00').toLocaleDateString('en-US',{month:'short',day:'numeric'});
}
function dayAbbr(ds, i) {
  if (i===0) return 'TODAY';
  return new Date(ds+'T12:00:00').toLocaleDateString('en-US',{weekday:'short'}).toUpperCase();
}

const TRIP = ['2026-03-05','2026-03-06','2026-03-07','2026-03-08'];

async function loadWeather() {
  const status = document.getElementById('footerStatus');
  status.className = 'footer-status';
  status.textContent = 'Fetching...';
  try {
    const res = await fetch(
      'https://api.open-meteo.com/v1/forecast?latitude=40.6461&longitude=-111.4980' +
      '&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,weathercode' +
      '&temperature_unit=fahrenheit&timezone=America/Denver&forecast_days=5'
    );
    if (!res.ok) throw new Error();
    const data = await res.json();
    const d = data.daily;
    let html = '';
    for (let i = 0; i < 5; i++) {
      const high = Math.round(d.temperature_2m_max[i]);
      const low  = Math.round(d.temperature_2m_min[i]);
      const prec = d.precipitation_probability_max[i];
      const code = d.weathercode[i];
      const ski  = skiTag(prec, code);
      const isTrip = TRIP.includes(d.time[i]);
      const cls  = i===0 ? 'today-cell' : isTrip ? 'trip-cell' : '';
      html += `
        <div class="fc-cell ${cls}">
          <div class="fc-day">${dayAbbr(d.time[i], i)}</div>
          <div class="fc-date">${shortDate(d.time[i])}${isTrip?' üéø':''}</div>
          <span class="fc-icon">${wmoIcon(code)}</span>
          <div class="fc-high">${high}¬∞</div>
          <div class="fc-low">‚Üì ${low}¬∞F</div>
          <div class="fc-prec">üíß ${prec}%</div>
          <div class="fc-bar-bg"><div class="fc-bar-fill" data-pct="${prec}"></div></div>
          <div class="fc-ski" style="color:${ski.color};background:${ski.bg}">${ski.label}</div>
        </div>`;
    }
    document.getElementById('forecastGrid').innerHTML = html;
    setTimeout(() => {
      document.querySelectorAll('.fc-bar-fill[data-pct]').forEach(b => b.style.width = b.dataset.pct + '%');
    }, 150);
    const now = new Date().toLocaleString('en-US',{timeZone:'America/Denver',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});
    status.className = 'footer-status ok';
    status.textContent = `‚úÖ Updated ${now} MT`;
  } catch(e) {
    document.getElementById('forecastGrid').innerHTML = '<div style="grid-column:1/-1;padding:20px;text-align:center;color:rgba(255,120,120,0.6)">‚ö† Could not load forecast. Try refreshing.</div>';
    status.className = 'footer-status err';
    status.textContent = '‚ö† Load failed ‚Äî tap refresh';
  }
}

loadWeather();
setInterval(loadWeather, 6 * 60 * 60 * 1000);
</script>
</body>
</html>
